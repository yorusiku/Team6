<template>
    <lightning-card class="add-contact-product-form">
        <lightning-input class="exclude-from-reset" type="hidden" label="고객명" object-api-name="Contact" value={recordId}></lightning-input>
        <lightning-combobox label="판매점" value={account} options={accounts} onchange={handleAccountSelection}></lightning-combobox>

        <!-- 노트북 로우들 -->
        <template for:each={laptopRows} for:item="laptopRow" for:index="laptopIndex">
            <lightning-layout key={laptopRow.id}>
                <lightning-layout-item class="slds-size_2-of-3">
                    <lightning-combobox class="slds-m-right_small" label="노트북제품" value={laptopRow.laptop} options={laptops} onchange={handleLaptopSelection}></lightning-combobox>
                </lightning-layout-item>
                <lightning-layout-item class="slds-size_1-of-5">
                    <lightning-input  type="number" label="수량" value={laptopRow.quantity} onchange={handleLaptopQuantityCountChange}></lightning-input>
                </lightning-layout-item>
            </lightning-layout>
        </template>
        
        <!-- 노트북 로우 버튼 -->
        <lightning-button class="slds-m-left_x-small" label="품목 추가하기" onclick={addNewLaptopRow}></lightning-button>
        <lightning-button class="slds-m-left_x-small" label="품목 제거하기" onclick={deleteLastLaptopRow}></lightning-button>


        <!-- 주변기기 로우들 -->
        <template for:each={generalDeviceRows} for:item="deviceRow" for:index="generalDeviceIndex">
            <lightning-layout key={deviceRow.id}>
                <lightning-layout-item class="slds-size_2-of-3">
                    <lightning-combobox class="slds-m-right_small" label="주변기기제품" value={deviceRow.generalDevice} options={generalDevices} onchange={handleGeneralDeviceSelection}></lightning-combobox>
                </lightning-layout-item>
                <lightning-layout-item class="slds-size_1-of-5">
                    <lightning-input type="number" label="수량" value={deviceRow.quantity} onchange={handleGeneralDeviceQuantityCountChange}></lightning-input>
                </lightning-layout-item>
            </lightning-layout>
        </template>
        
        <!-- 주변기기 로우 버튼 -->
        <lightning-button class="slds-m-left_x-small" label="품목 추가하기" onclick={addNewGeneralDeviceRow}></lightning-button>
        <lightning-button class="slds-m-left_x-small" label="품목 제거하기" onclick={deleteLastGeneralDeviceRow}></lightning-button>


        <lightning-input type="datetime" label="주문날짜" value={orderDateTime} onchange={handleOrderDateTimeSelection}></lightning-input>
        <lightning-input type="number" label="할인율" value={discount} onchange={handleDiscountRateChange}></lightning-input>
        <lightning-card title="제품 가격">
            <div slot="footer">
                <div>할인 전 총 가격: {totalPrice.originalTotalPrice}</div>
                <div>노트북 가격: {totalPrice.laptopTotalPrice}</div>
                <div>주변기기 가격: {totalPrice.generalDeviceTotalPrice}</div>
                <div>할인 가격: {totalPrice.discountAmount}</div>
                <div>할인 된 가격: {totalPrice.discountedPrice}</div>
            </div>
        </lightning-card>        
        <lightning-button label="주문하기" onclick={addContactProducts}></lightning-button>
    </lightning-card>


        <!-- <p>This example creates a simple layout with field headers.</p>
    <div class="c-container">
        <lightning-layout>
            <lightning-layout-item padding="around-small">
                <div class="header-column">
                    <p class="field-title" title="Field 1">총 가격</p>
                    <p>TOTALPRICE {totalprice}</p>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small">
                <div class="header-column">
                    <p class="field-title" title="Field2 (3)">할인율                    </p>
                        <lightning-button-icon icon-name="utility:down" variant="border-filled" size="small" alternative-text="More Actions"></lightning-button-icon>

                    <p>DISCOUNT {discount}</p>
                </div>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small">
                <div class="header-column">
                    <p class="field-title" title="Field 3">할인된 가격</p>
                    <a href="#">{finalprice}</a>
                </div>
            </lightning-layout-item>
        </lightning-layout>
    </div> -->


</template>